{"version":3,"sources":["components/App.js","components/Root.js","index.js","api/utils.js","utils/localStorage.js","api/data.js","api/index.js","contexts/TodoContext.js","components/IsLoading.js"],"names":["TodoListPage","React","lazy","__webpack_require__","e","then","bind","TodoDetailsPage","TodoCreatePage","App","react_default","a","createElement","react","maxDuration","fallback","IsLoading","reactstrap_es","es","path","concat","process","Root","TodoContext","components_App","ReactDOM","createRoot","document","getElementById","render","components_Root","getTodosFromLocalStorage","todos","key","value","localStorage","getItem","JSON","parse","getLocalStorageValue","console","log","setTodosToLocalStorage","stringify","setItem","delay","ms","arguments","length","undefined","_ref","_ref$min","min","_ref$max","max","Math","floor","random","randomMs","Promise","resolve","setTimeout","initialTodos","id","v4","text","completed","createdAt","createdBy","updatedAt","updatedBy","api","list","_list","Object","asyncToGenerator","regenerator_default","mark","_callee","todosFromLocalStorage","wrap","_context","prev","next","abrupt","stop","this","apply","create","_create","_callee2","todo","timestamp","newTodo","existingTodos","_context2","Date","getTime","objectSpread","toConsumableArray","_x","initialState","isLoading","error","createContext","TodoProvider","children","_useReducer","useReducer","state","action","type","payload","_useReducer2","slicedToArray","store","dispatch","fetchTodoList","_ref2","sent","t0","useEffect","createTodo","_ref3","Provider","getTodoById","find","Consumer","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_ref$resourceName","resourceName","className"],"mappings":"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","file":"static/js/main.2677fc66.chunk.js","sourcesContent":["import React, { Suspense } from 'react';\nimport { Router } from '@reach/router';\nimport { Container } from 'reactstrap';\n\nimport IsLoading from './IsLoading';\n\nconst TodoListPage = React.lazy(() =>\n  import(/* webpackChunkName: 'TodoListPage' */ './pages/TodoListPage')\n);\nconst TodoDetailsPage = React.lazy(() =>\n  import(/* webpackChunkName: 'TodoDetailsPage' */ './pages/TodoDetailsPage')\n);\nconst TodoCreatePage = React.lazy(() =>\n  import(/* webpackChunkName: 'TodoCreatePage' */ './pages/TodoCreatePage')\n);\n\nfunction App() {\n  return (\n    <Suspense maxDuration={500} fallback={<IsLoading />}>\n      <Container>\n        <Router>\n          <TodoListPage path={`${process.env.PUBLIC_URL}/`} />\n          <TodoDetailsPage path={`${process.env.PUBLIC_URL}/details/:id`} />\n          <TodoCreatePage path={`${process.env.PUBLIC_URL}/create`} />\n        </Router>\n      </Container>\n    </Suspense>\n  );\n}\n\nexport default App;\n","import React from 'react';\n\nimport { TodoProvider } from '../contexts/TodoContext';\nimport App from './App';\n\nfunction Root() {\n  return (\n    <TodoProvider>\n      <App />\n    </TodoProvider>\n  );\n}\n\nexport default Root;\n","import 'bootstrap/dist/css/bootstrap.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\n\nimport Root from './components/Root';\n\nReactDOM.createRoot(document.getElementById('root')).render(<Root />);\n","import { getLocalStorageValue, setLocalStorage } from '../utils/localStorage';\n\nconst LOCAL_STORAGE_KEY = 'TODOS';\n\nexport const getTodosFromLocalStorage = () => {\n  const todos = getLocalStorageValue(LOCAL_STORAGE_KEY);\n\n  if (todos) {\n    console.log('ðŸ“š `todos` loaded from local storage.');\n    return JSON.parse(todos);\n  }\n\n  return null;\n};\n\nexport const setTodosToLocalStorage = todos => {\n  console.log('ðŸ“š `todos` set to local storage.');\n  setLocalStorage(LOCAL_STORAGE_KEY, JSON.stringify(todos));\n};\n\nconst randomMs = ({ min = 100, max = 1600 } = {}) =>\n  Math.floor(Math.random() * (max - min + 1) + min);\n\nexport const delay = (ms = randomMs()) => {\n  console.log(`     - delay was ${ms} ms`);\n  return new Promise(resolve => setTimeout(resolve, ms));\n};\n","export const getLocalStorageValue = key => {\n  const value = localStorage.getItem(key);\n  if (!value) return null;\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    return null;\n  }\n};\n\nexport const setLocalStorage = (key, value) => {\n  localStorage.setItem(key, JSON.stringify(value));\n};\n","import { v4 } from 'node-uuid';\n\nexport const getTimestamp = () => new Date().getTime();\n\nexport const initialTodos = [\n  {\n    id: v4(),\n    text: 'Try Suspense',\n    completed: true,\n    createdAt: 1541163993401,\n    createdBy: 'colin',\n    updatedAt: 1541163996938,\n    updatedBy: 'colin'\n  },\n  {\n    id: v4(),\n    text: 'Try Hooks',\n    completed: true,\n    createdAt: 1541163995178,\n    createdBy: 'colin',\n    updatedAt: 1541163996938,\n    updatedBy: 'colin'\n  },\n  {\n    id: v4(),\n    text: 'Profit',\n    completed: false,\n    createdAt: 1541163996071,\n    createdBy: 'colin',\n    updatedAt: 1541163996071,\n    updatedBy: 'colin'\n  }\n];\n","import { v4 } from 'node-uuid';\nimport {\n  getTodosFromLocalStorage,\n  setTodosToLocalStorage,\n  delay\n} from './utils';\nimport { initialTodos, getTimestamp } from './data';\n\nconst api = {\n  todos: {\n    async list() {\n      /*\n      if (Math.random() > 0.5) {\n        throw new Error('ðŸ’£');\n      }\n      */\n      const todosFromLocalStorage = getTodosFromLocalStorage();\n      if (todosFromLocalStorage) {\n        return todosFromLocalStorage;\n      }\n\n      console.log('ðŸ“ž `api.todos.list` called:');\n      await delay();\n      setTodosToLocalStorage(initialTodos);\n      return initialTodos;\n    },\n    async create(todo) {\n      console.log(`ðŸ“ž api.todos.create called:`);\n      const timestamp = getTimestamp();\n      const user = 'user'; // TODO\n      const newTodo = {\n        ...todo,\n        id: v4(),\n        createdAt: timestamp,\n        createdBy: user,\n        updatedAt: timestamp,\n        updatedBy: user\n      };\n      /*\n      throw new Error('ðŸ’£');\n      */\n      const existingTodos = getTodosFromLocalStorage();\n      setTodosToLocalStorage([...existingTodos, newTodo]);\n      await delay();\n    }\n  }\n};\n\nexport default api;\n","import React, { useReducer, useEffect } from 'react';\n\nimport api from '../api';\n\nconst initialState = {\n  isLoading: true,\n  error: null,\n  todos: null\n};\n\nconst FETCH_TODO_LIST_SUCCESS = 'FETCH_TODO_LIST_SUCCESS';\nconst FETCH_TODO_LIST_ERROR = 'FETCH_TODO_LIST_ERROR';\n\nconst TodoContext = React.createContext(null);\n\nconst TodoProvider = ({ children }) => {\n  const [store, dispatch] = useReducer((state, action) => {\n    switch (action.type) {\n      case FETCH_TODO_LIST_SUCCESS:\n        return {\n          ...state,\n          isLoading: false,\n          error: null,\n          todos: action.payload.todos\n        };\n\n      case FETCH_TODO_LIST_ERROR:\n        return {\n          ...state,\n          isLoading: false,\n          error: action.payload.error,\n          todos: null\n        };\n\n      default:\n        return state;\n    }\n  }, initialState);\n\n  const fetchTodoList = async () => {\n    try {\n      const todos = await api.todos.list();\n      dispatch({ type: FETCH_TODO_LIST_SUCCESS, payload: { todos } });\n    } catch (error) {\n      dispatch({ type: FETCH_TODO_LIST_ERROR, payload: { error } });\n    }\n  };\n\n  useEffect(() => {\n    fetchTodoList();\n  }, []);\n\n  const getTodoById = id => {\n    const { todos } = store;\n\n    if (todos) {\n      return todos.find(todo => todo.id === id);\n    }\n\n    return null;\n  };\n\n  const createTodo = async todo => {\n    try {\n      await api.todos.create(todo);\n    } catch (error) {\n      throw error;\n    }\n\n    await fetchTodoList();\n  };\n\n  return (\n    <TodoContext.Provider value={{ ...store, getTodoById, createTodo }}>\n      {children}\n    </TodoContext.Provider>\n  );\n};\n\nconst TodoConsumer = TodoContext.Consumer;\n\nexport default TodoContext;\n\nexport { TodoProvider, TodoConsumer };\n","import React from 'react';\n\nconst IsLoading = ({ resourceName = null }) => (\n  <p className=\"text-center text-muted\">\n    {resourceName ? `Loading ${resourceName}...` : 'Loading...'}\n  </p>\n);\n\nexport default IsLoading;\n"],"sourceRoot":""}